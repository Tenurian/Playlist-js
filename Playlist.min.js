var Playlist=function(e){function L(e,t){var n=e.getBoundingClientRect();return{x:t.clientX-n.left,y:t.clientY-n.top}}function q(e){var t,n,a;for(a=e.length;a;a-=1)t=Math.floor(Math.random()*a),n=e[a-1],e[a-1]=e[t],e[t]=n}var t=[],n=e.hasOwnProperty("elementName")?e.elementName:!1,a=-1,i=e.hasOwnProperty("width")?e.width:"100%",r=e.hasOwnProperty("folder")?e.folder:null,o=e.hasOwnProperty("mediaType")?e.mediaType:"audio",s=e.hasOwnProperty("filetype")?e.filetype:"audio"==o?".mp3":".mp4",l=e.hasOwnProperty("focusPlaying")?e.focusPlaying:!1,d=e.hasOwnProperty("shuffle")?e.shuffle:!1,c=e.hasOwnProperty("loop")?e.loop:!1,f=e.hasOwnProperty("links")?e.links:!1,u=e.hasOwnProperty("showAll")?e.showAll:!0,m=e.hasOwnProperty("alwaysShowControls")?e.alwaysShowControls:!0,h=e.hasOwnProperty("controlsSize")?e.controlsSize:0,p=e.hasOwnProperty("fontSize")?e.fontSize:!1,g=e.hasOwnProperty("displayName")?e.displayName:!0,y=e.hasOwnProperty("progressBarHeight")?e.progressBarHeight:"30px",w=e.hasOwnProperty("progressBarWidth")?e.progressBarWidth:(i.indexOf("%")>-1?.9*((document.getElementById(n).parentElement.width?document.getElementById(n).parentElement.width:window.innerWidth/2)*(Number(i.slice(0,i.indexOf("%")))/100)):Math.ceil(.9*Number(i.slice(0,-2))))+"px",v=e.hasOwnProperty("progressBarColor")?e.progressBarColor:"#3f79e0",B=e.hasOwnProperty("progressBarBorder")?e.progressBarBorder:"3px solid"+v,k=e.hasOwnProperty("progressBarBackground")?e.progressBarBackground:"#4a4a4a",I=e.hasOwnProperty("progressBarRadius")?e.progressBarRadius:"2px",x=e.hasOwnProperty("songBarBackground")?e.songBarBackground:"#000",E=e.hasOwnProperty("songBarColor")?e.songBarColor:"#FFF",b=e.hasOwnProperty("songBarHighlight")?e.songBarHighlight:"#aaa",O=e.hasOwnProperty("songBarBorder")?e.songBarBorder:"2px solid "+b,P=e.hasOwnProperty("songBarRadius")?e.songBarRadius:"5px",T=e.hasOwnProperty("videoWidth")?e.videoWidth:"auto",N=e.hasOwnProperty("videoHeight")?e.videoHeight:"auto",M=(e.hasOwnProperty("videoborder")?e.videoborder:"1px solid "+b,e.hasOwnProperty("skipAmount")?e.skipAmount:5e3),R=e.hasOwnProperty("debug")?e.debug:!1,C=!1,S=!1,z=!1,H=!1;Element.prototype.documentOffsetTop=function(){return this.offsetTop+(this.offsetParent?this.offsetParent.documentOffsetTop():0)};var j=function(){if("video"==o){var e=document.getElementById(n+"-track-"+a);e.requestFullscreen?S?e.exitFullscreen():e.requestFullscreen():e.mozRequestFullScreen?S?e.mozCancelFullScreen():e.mozRequestFullScreen():e.webkitRequestFullscreen&&(S?e.webkitExitFullscreen():e.webkitRequestFullscreen()),e.paused&&e.play(),S=!S}},A=function(){var e=document.getElementById(n+"-track-"+a);e.currentTime+M/1e3<e.duration?e.currentTime+=M/1e3:c?e.currentTime=0:Y()},W=function(){var e=document.getElementById(n+"-track-"+a);e.currentTime-M/1e3>0?e.currentTime-=M/1e3:D()},Y=function(){S&&j(),document.getElementById(n+"-track-"+a).paused||X(a),a=t[(t.indexOf(a)+1)%t.length],X(a),G()},D=function(){document.getElementById(n+"-track-"+a).currentTime>=1?document.getElementById(n+"-track-"+a).currentTime=0:(S&&j(),document.getElementById(n+"-track-"+a).paused||X(a),a=t[(t.length+t.indexOf(a)-1)%t.length],X(a),G())},Q=function(){c=!c;var e;for(e=0;e<f.length;e++)document.getElementById(n+"-loop-"+e).className=h+(c?"fa fa-retweet":"fa fa-retweet "+n+"-highlight")},J=function(){d=!d,d&&q(t);var e;for(e=0;e<f.length;e++)document.getElementById(n+"-shuffle-"+e).className=h+(d?"fa fa-random":"fa fa-random "+n+"-highlight"),d||(t[e]=e)},X=function(e){var t=document.getElementById(n+"-track-"+e);if(a==e?t.paused?(t.play(),document.getElementById(n+"-play-pause-"+e).className=h+" fa fa-pause"):(t.pause(),document.getElementById(n+"-play-pause-"+e).className=h+" fa fa-play"):(document.getElementById(n+"-track-"+a).pause(),document.getElementById(n+"-play-pause-"+a).className=h+" fa fa-play",document.getElementById(n+"-play-pause-"+e).className=h+" fa fa-pause",t.play(),a=e),l){var i=document.getElementById(n+"-track-"+a).documentOffsetTop()-window.innerHeight/2;window.scrollTo(0,i)}},G=function(){var e;if(!m)for(e=0;e<f.length;e++)document.getElementById(n+"-controls-"+e).className=n+"-controls "+(e==a?"":"hidden");if(!u)for(e=0;e<f.length;e++)document.getElementById(n+"-media-"+e).className=n+"-media "+(e==a?"":" hidden")},K=function(e){var t=document.getElementById(n+"-filler-"+a),i=t.getContext("2d");i.clearRect(0,0,t.width,t.height),i.fillStyle=v,i.fillRect(0,0,Math.ceil(t.width*(e/100)),t.height)},U=function(){if(f)if(f.length>=1){switch(h){case 0:h="";break;case 1:h=" fa-lg ";break;case 2:h=" fa-2x ";break;case 3:h=" fa-3x ";break;case 4:h=" fa-4x ";break;case 5:h=" fa-5x ";break;default:console.error("Playlist-js: controlsSize must be a number between 0 and 5 (inclusive)")}var e;for(a=0,content="<link rel='stylesheet' href='https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css'>",e=0;e<f.length;e++)t[e]=e,content+="<div id='"+n+"-media-"+e+"' class='"+n+"-media "+(u?"":0==e?"":"hidden")+"'>",g&&(content+="<div id='"+n+"-name-"+e+"' class='"+n+"-name'><h3>"+f[e].replace(/\\/g,"/").split("/")[f[e].replace(/\\/g,"/").split("/").length-1].replace(/%20/g," ").replace(/%5B/g,"[").replace(/%5D/g,"]").slice(0,f[e].lastIndexOf(".")-f[e].length)+"</h3></div>"),content+="<div class='"+n+"-media-container'>",content+="<"+o+" "+("video"==o?(R?"controls":"")+" width='"+T+"' height='"+N+"' ":" "+(R?"controls":""))+" "+(c?"loop":"")+" id='"+n+"-track-"+e+"' class='"+n+"-track "+(R?"":"video"==o?"center":"hidden")+"' preload:'auto'>",content+="<source src='"+f[e]+"' > Your browser does not support the HTML5 "+o+" element",content+="<br></"+o+">",content+="</div>",content+="<div id='"+n+"-fill-bar-"+e+"' class='"+n+"-fill-bar'>",content+="<canvas width='"+(Number(w.slice(0,-2))-2*Number(B.split(" ")[0].slice(0,-2)))+"' height='"+(y.slice(0,-2)-2*B.split(" ")[0].split("").slice(0,-2).join())+"' id='"+n+"-filler-"+e+"' class='"+n+"-filler'>Your browser does not support the html5 canvas element</canvas>",content+="</div>",content+="<div id='"+n+"-controls-"+e+"' class='"+n+"-controls "+(m?"":0==e?"":"hidden")+"'>",content+="<i id='"+n+"-back-"+e+"' class='fa fa-fast-backward "+h+"'></i>",content+="<i id='"+n+"-rwd-"+e+"' class='fa fa-backward "+h+"'></i>",content+="<i id='"+n+"-play-pause-"+e+"' class='fa fa-play "+n+"-highlight "+h+"'></i>",content+="<i id='"+n+"-fwd-"+e+"' class='fa fa-forward "+h+"'></i>",content+="<i id='"+n+"-skip-"+e+"' class='fa fa-fast-forward "+h+"'></i>",content+="<i id='"+n+"-loop-"+e+"' class='fa fa-retweet "+(c?"":n+"-highlight")+" "+h+"'></i>",content+="<i id='"+n+"-shuffle-"+e+"' class='fa fa-random "+(d?"":n+"-highlight")+" "+h+"'></i>",content+="<span id='"+n+"-loading-"+e+"' ><i class='fa fa-cog fa-spin margin-bottom "+n+"-highlight "+n+"-loading "+h+"' aria-hidden='true'></i>Loading media...</span>",content+="<span id='"+n+"-time-"+e+"' class='"+n+"-time'><h5>0:00</h5></span>",content+="</div>",content+="</div>",content+="</div>";content+="<style>",content+="#"+n+"{width:"+i+"; min-width: "+w+"; margin:0 auto; padding: 25px}",content+=".fa{text-align:left; cursor: pointer; margin-left: 10px; margin-top: 10px}",content+="."+n+"-media{padding:5px; margin: 10px auto; color: "+E+"; background-color:"+x+"; border:"+O+"; border-radius:"+P+"; min-width: "+(Number(Number(w.slice(0,-2))+2*Number(B.split(" ")[0].slice(0,-2)))+20)+"px}",content+="."+n+"-media-container{text-align:center}",content+="."+n+"-fill-bar{margin:0 auto;height:"+y+";background-color:"+k+";width:"+w+";border:"+B+";border-radius:"+I+"}",content+="."+n+"-filler{float:left; height:calc("+(y.slice(0,-2)-2*B.split(" ")[0].split("").slice(0,-2).join())+"px);background-color: transparent; width:100%}",content+="."+n+"-controls{ width: 100%; color:"+E+"}",content+="."+n+"-controls .fa{z-index:3;text-align:left; color:"+E+"}",content+="."+n+"-time{float: right; margin-right: 10px}",content+="."+n+"-time h5{"+(p?"font-size:"+p+"px":"")+"}",content+="."+n+"-name{width:100%;text-align:center}",content+="."+n+"-name>h3{margin-top:10px;padding-top:0; color:"+E+"}",content+="."+n+"-highlight{color:"+b+" !important}",content+="."+n+"-loading{cursor:default !important; }",content+=".fa-spin { -webkit-filter: blur(0); }",content+="</style>",document.getElementById(n).innerHTML=content,d&&q(t);var r;for(r=0;r<f.length;r++){var s=document.getElementById(n+"-track-"+r);s.onclick=function(){if(C)j();else{var e=this.id.slice(this.id.lastIndexOf("-")+1);X(e),C=!0,setTimeout(function(){C=!1},200)}},s.addEventListener("ended",function(){G(),document.getElementById(n+"-track-"+a).currentTime=0,document.getElementById(n+"-track-"+a).play(),c||Y()}),s.addEventListener("timeupdate",function(){var e=this.currentTime,t=e/60<<0,i=e%60;document.getElementById(n+"-time-"+a).innerHTML="<h5>"+((t>0?t:"0")+":"+(i>=10?Math.floor(i):"0"+Math.floor(i)))+"</h5>";var r=100*document.getElementById(n+"-track-"+a).currentTime/document.getElementById(n+"-track-"+a).duration;K(r)},!1),s.onloadeddata=function(){document.getElementById(n+"-play-pause-"+this.id.slice(this.id.lastIndexOf("-")+1,this.id.length)).className=h+" fa fa-play",document.getElementById(n+"-loading-"+this.id.slice(this.id.lastIndexOf("-")+1,this.id.length)).className="hidden"},document.getElementById(n+"-filler-"+r).addEventListener("mousedown",function(e){z=!0,this.id.slice(this.id.lastIndexOf("-")+1)!=a&&X(this.id.slice(this.id.lastIndexOf("-")+1)),document.getElementById(n+"-track-"+this.id.slice(this.id.lastIndexOf("-")+1)).paused&&document.getElementById(n+"-track-"+this.id.slice(this.id.lastIndexOf("-")+1)).play;var t=document.getElementById(n+"-filler-"+this.id.slice(this.id.lastIndexOf("-")+1)),i=document.getElementById(n+"-track-"+this.id.slice(this.id.lastIndexOf("-")+1));i.currentTime=Math.ceil(i.duration*(L(t,e).x/t.width))},!1),window.addEventListener("mouseup",function(e){z=!1},!1),document.getElementById(n+"-filler-"+r).addEventListener("mousemove",function(e){if(z){var t=document.getElementById(n+"-filler-"+this.id.slice(this.id.lastIndexOf("-")+1)),a=document.getElementById(n+"-track-"+this.id.slice(this.id.lastIndexOf("-")+1));a.currentTime=Math.ceil(a.duration*(L(t,e).x/t.width))}},!1),document.getElementById(n+"-back-"+r).onclick=function(){this.id.slice(this.id.lastIndexOf("-")+1);D()},document.getElementById(n+"-rwd-"+r).onclick=function(){this.id.slice(this.id.lastIndexOf("-")+1);W()},document.getElementById(n+"-play-pause-"+r).onclick=function(){var e=this.id.slice(this.id.lastIndexOf("-")+1);X(e)},document.getElementById(n+"-fwd-"+r).onclick=function(){this.id.slice(this.id.lastIndexOf("-")+1);A()},document.getElementById(n+"-skip-"+r).onclick=function(){this.id.slice(this.id.lastIndexOf("-")+1);Y()},document.getElementById(n+"-loop-"+r).onclick=function(){this.id.slice(this.id.lastIndexOf("-")+1);Q()},document.getElementById(n+"-shuffle-"+r).onclick=function(){this.id.slice(this.id.lastIndexOf("-")+1);J()}}document.getElementById(n).tabIndex=1,document.getElementById(n).onkeydown=function(e){var n,t=e.keyCode?e.keyCode:e.which;if(!n){switch(t){case 13:case 32:return n=!0,X(a),e.preventDefault(),!1;case 39:n=!0,Y();break;case 37:n=!0,D();break;case 83:n=!0,J();break;case 70:j();break;case 82:case 76:n=!0,Q()}setTimeout(function(){n=!1},200)}}}else console.error("Playlist-js: Links Array must have at least one item");else console.error("Playlist-js: You must provide an array of links")};if(document.getElementById(n))if("audio"!=o&&"video"!=o)console.error("Playlist-js: the mediaType must be either audio or video");else if(r){if(window.jQuery){if(H){var V=r;$.ajax({url:V,success:function(e){f=[],".*"==s?$.each([".3ga",".aac",".aiff",".amr",".ape",".asf",".asx",".cda",".dvf",".flac",".gp4",".gp5",".gpx",".logic",".m4a",".m4b",".m4p",".midi",".mp3",".ogg",".pcm",".rec",".snd",".sng",".uax",".wav",".wma",".wpl"],function(t,n){$(e).find("a:contains("+n+")").each(function(){var e=$(this).attr("href");f[t]=e.replace(/%20/g," ")})}):$(e).find("a:contains("+s+")").each(function(e,t){var n=$(this).attr("href");f[e]=n.replace(/%20/g," ")}),U()},error:function(e){console.error("ERROR: "+e)}})}else console.error("This functionality requires JQuery to be used, and for the purposes of this assignment have been shut off. (<sarcasm>Thanks Mr. Beatty</sarcasm>)");U()}}else U();else console.error("Playlist-js: You must include an elementName in the constructor")};